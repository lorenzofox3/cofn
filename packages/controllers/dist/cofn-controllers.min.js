const t=t=>r=>function*(n){const o={},{$host:s}=n;let c=!1;const a={getState:()=>structuredClone(o),...t({...n,state:new Proxy(o,{set:(t,e,r)=>(t[e]=r,s.isConnected&&c&&s.render(),!0)}),attributes:e(n.$host)})},{render:i}=s;s.render=(t={})=>i({...t,state:a.getState()});const l=r({...n,controller:a});c=!0;try{yield*l}finally{l.return()}},e=t=>Object.fromEntries(t.getAttributeNames().map((e=>[e,t.getAttribute(e)])));export{t as withController};
